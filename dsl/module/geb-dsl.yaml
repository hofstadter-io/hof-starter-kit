name: "module"
version: "0.0.1"

spec:
  type: "object"
  fields:

    # NAME
    - name: "name"
      type: NAME_BLACKLIST

    # TYPES
    - name: "types"
      type: "list"
      items:
        type: "object"
        fields:
        - name: "name"
          type: NAME_BLACKLIST
        - name: "type"
          type: TYPEPATH_REGEX

    # FILES
    - name: files
      optional: true
      type: list
      items:
        type: object
        fields:
        - name: "name"
          type: NAME_BLACKLIST
        - name: "src"
          type: FILEPATH_REGEX
        - name: "dst"
          type: FILEPATH_REGEX

    # SEEDS
    - name: "seeds"
      optional: true
      type: "object"
      fields:

      - name: "file"
        type: "string"
        regex: '^([[:word:]-]+\/)+[[:word:]-]+\.json$'

      - name: types
        type: list
        items:
          type: object
          fields:
          - name: "name"
            type: NAME_BLACKLIST
          - name: "data"
            type: NAME_REGEX
          - name: "type"
            type: TYPEPATH_REGEX

    # TRANSLATIONS
    - name: "translations"
      type: "list"
      items:
        type: "object"
        fields:
        - name: "name"
          type: NAME_REGEX
        - name: "file"
          type: "string"
          regex: '^([[:word:]-]+\/)+[[:word:]-]+\.json$'

    # COMPONENTs
    - name: components
      optional: true
      type: list
      items:
        type: object
        fields:

        - name: "name"
          type: NAME_BLACKLIST

        - name: style
          optional: true
          type: list
          items:
            type: FILEPATH_REGEX

        - name: content
          optional: true
          type: list
          items:
            type: FILEPATH_REGEX

        - name: current-user
          optional: true
          type: boolean

        - name: data
          optional: true
          type: list
          items:
            type: object
            fields:
            - name: "name"
              type: "string"
              regex: '^[[:alpha:]][[:word:]-]*$'
            - name: "type"
              type: "string"
              regex: '^type\.modules\.[[:word:]-]+\.[[:word:]-]+$'
            - name: query
              optional: true
              type: object
              fields:
                - name: type
                  type: string
                  regex: '^(view|list)$'
                # - name: sync
                #   optional: true
                #   type: bool
            - name: mutations
              optional: true
              type: list
              items:
                type: string
                regex: '^(create|update|delete)$'

    # PAGES
    - name: pages
      optional: true
      type: list
      items:
        type: object
        fields:
        - name: "name"
          type: "string"
          regex: '^[[:alpha:]][[:word:]-]*$'
        - name: "route"
          type: "string"
          regex: '^(\/[[:alpha:]][[:word:]-]*)+$'

        - name: style
          optional: true
          type: list
          items:
            type: string
            regex: '^([[:word:]-]+\/)+[[:word:]-]+\.[[:lower:]]{1,4}$'

        - name: content
          optional: true
          type: list
          items:
            type: string
            regex: '^([[:word:]-]+\/)+[[:word:]-]+\.[[:lower:]]{1,4}$'

        - name: current-user
          optional: true
          type: boolean

        - name: data
          optional: true
          type: list
          items:
            type: object
            fields:
            - name: "name"
              type: "string"
              regex: '^[[:alpha:]][[:word:]-]*$'
            - name: "type"
              type: "string"
              regex: '^type\.modules\.[[:word:]-]+\.[[:word:]-]+$'
            - name: query
              optional: true
              type: object
              fields:
                - name: type
                  type: string
                  regex: '^(view|list)$'
                # - name: sync
                #   optional: true
                #   type: bool
            - name: mutations
              optional: true
              type: list
              items:
                type: string
                regex: '^(create|update|delete)$'

        - name: components
          optional: true
          type: list
          items:
            type: object
            fields:
            - name: "name"
              type: "string"
              regex: '^[[:alpha:]][[:word:]-]*$'
            - name: "component"
              type: COMPONENT_REGEX

            - name: current-user
              optional: true
              type: boolean

            - name: data
              optional: true
              type: list
              items:
                type: object
                fields:
                - name: "name"
                  type: "string"
                  regex: '^[[:alpha:]][[:word:]-]*$'
                - name: "type"
                  type: "string"
                  regex: '^type\.modules\.[[:word:]-]+\.[[:word:]-]+$'
                - name: query
                  optional: true
                  type: object
                  fields:
                    - name: type
                      type: string
                      regex: '^(view|list)$'
                    # - name: sync
                    #   optional: true
                    #   type: bool
                - name: mutations
                  optional: true
                  type: list
                  items:
                    type: string
                    regex: '^(create|update|delete)$'



